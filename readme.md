# Команды

## HigwayCrossing

Если нужно провести новый переход через улицу, то можно просто провести (обычно от тротуара до тротуара на противоположной стороне) линию,
выделить её и линии проезжей части и запустить данную команду, затем проверить и, возможно, поменять поставленные `crossing=*`.
У ЭТИХ ЛИНИЙ НЕ ДОЛЖНО БЫТЬ ОБЩИХ NODES, команда их сама поставит.

**Аргументы**:

* линия для нового перехода + линии улицы, которые она пересекает

Линией для нового перехода будет выбрана та линия, которая пересекает все остальные линии.
Если линий всего две, то будет выбрана та, на которой стоит `highway=footway` или та, на которой нет тегов.

Команда делает следующее:

* Ставит теги `highway=footway` и `footway=crossing` на линию перехода.
* Создаёт точки пересечения, ставит на них `highway=crossing` и `crossing=*`, пытаясь угадать тип перехода.
* Может угадать тип перехода: либо `crossing=traffic_signals`, либо `crossing=uncontrolled`.

## HighwayRewire

Была актуальна для перерисовки улиц в связи со сменой лицензии в 2012 г.
Теперь может пригодиться делящим улицы в двухвейку и объединяющим обратно.

У нас есть несколько дорог (1), мы их хотим сохранить.
Они пересекает другую дорогу (2), которую мы перерисовали в третью дорогу (3), и теперь хотим удалить.
Но (1) надо пересоединить с (3) вместо (2), а делать это лень, так как (1) много.
Некоторые из (1) заканчиваются на (2), и если (3) дальше, то эти (1) надо продлевать, а это 5 тычков на линию
(выделить линию из (1), выделить её конечную точку на (2), перейти в режим добавления, перейти в его подрежим с ограничением углов (если не хотим криво рисовать), ткнуть в нужное место на (3)).
Данная команда всё это проделывает.

Тут ещё была поддержка turn restrictions, но что-то где-то поменяли и она сломалась.

Заодно с этим всем можно сделать вот что:
Если вдоль (2) мы нарисовали ещё и тротуар, и хотим, чтобы (1) его пересекали, но по ним нельза было бы выйти пешком на проезжую часть,
то данная команда распилит (1) по тротуару и поставит на часть между тротуаром и (2) `foot=no`.

**Аргументы**:

* (1)
* (2)
* (3) + дополнительно можно указать тротуар

## PoiAlign

**Аргументы**:

* точки-POI (хотя бы одна), линии-соединители POI со зданием и линия-здание (обязательно).

Зданием будет считаться линия без `highway`.

* Ставит POI на расстояние 2 метров от стены здания.
* Если POI соединена со зданием одной из указанных линий-соединителей так, что в линии-соединителе между POI и зданием нет других точек, сдвигает POI так, что отрезок соединителя образует биссектрису угла, образуемого стенами здания в точке соединения. Проще говоря, если стена здания в точке соединения не кривая, соединяющий отрезок встанет к ней перпендикулярно.
* Если на точке стоял `entrance`, убирает с неё `entrance`, ставит `entrance` на стену здания и соединяет получившийся вход с POI с помощью `highway=corridor`.
